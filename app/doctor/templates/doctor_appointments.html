<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="{{ url_for('static', filename='patient_styles.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='doctor_styles.css') }}">
        <title>Doctor - Appointments</title>
    </head>
    
        <style>
            .dashboard-container{
                display:flex;
                gap:25px;
                margin-top:20px;
                margin-left:30px
            }

            .dashboard-vertical{
                flex:3;
                display:flex;
                flex-direction: column;
                gap: 20px;
            }

            .quick-actions {
                flex:1;
                display:flex;
                flex-direction: column;
                gap:20px;
            }

        </style>
    <body>
    <header class="navbar-doctor">
        <div class="logo">
            <a href="{{ url_for('main.index') }}">CuraCloud</a>
        </div>
        <div class="nav-buttons">
            <div class="right-header">
                <div class="profile-icon"> 
                    <img id="admin-profile-icon" src="{{ url_for('static', filename='images/user.png') }}" alt="admin profile icon">
                </div>
                    <a href="{{ url_for('auth.login') }}">
                        <button class="logout-btn">Logout</button>
                    </a>
                </div>
                
            </div>
        </div>
    </header>

    <div class="container">
        <div class="side-menu">
            <ul>
                <li><a href="{{ url_for('doctor.doctor_home') }}">Home</a></li>
                <li><a href="{{ url_for('doctor.doctor_appointments') }}" class="active">Appointments</a></li>
                <li><a href="{{ url_for('doctor.doctor_messages') }}">Messages</a></li>
                <li><a href="{{ url_for('doctor.doctor_patients') }}">Patient List</a></li>
                <li><a href="{{ url_for('doctor.doctor_refills') }}">Prescription Refill Requests</a></li>
                <!-- <li><a href="#">Lab Results</a></li> -->
                <!--<li><a href="#">My Health</a></li> -->
            </ul>
        </div>

        <div class="content">
            <div class="welcome-section-doctor">
                <div class="welcome-message">Appointments for Dr. {{ doctor.first_name }} {{ doctor.last_name }}</div>
                <div class="welcome-subtitle">Manage your medical appointments.</div>
            </div>

            <div class="dashboard-container">


                <div class="dashboard-vertical">

    <!-- Today's Appointments -->
    <!-- <div class="dashboard-card">
        <div class="card-header-doctor">Today's Appointments</div>
        <div class="card-content">
            {% if todays_appointments %}
            <table border="1" cellpadding="5" cellspacing="0">
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Patient Name</th>
                        <th>Clinic</th>
                        <th>City</th>
                        <th>State</th>
                    </tr>
                </thead>
                <tbody>
                    {% for appt in todays_appointments %}
                    <tr>
                        <td>{{ appt.appointment_time.strftime("%H:%M") }}</td>
                        <td>{{ appt.patient.first_name }} {{ appt.patient.last_name }}</td>
                        <td>{{ appt.clinic_name }}</td>
                        <td>{{ appt.city }}</td>
                        <td>{{ appt.state }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p>No appointments today.</p>
            {% endif %}
        </div>
    </div> -->

    <!-- Upcoming Appointments -->
    <!-- <div class="dashboard-card">
        <div class="card-header-doctor">Upcoming Appointments</div>
        <div class="card-content">
            {% if upcoming_appointments %}
            <table border="1" cellpadding="5" cellspacing="0">
                <thead>
                    <tr>
                        <th>Date & Time</th>
                        <th>Patient Name</th>
                        <th>Clinic</th>
                        <th>City</th>
                        <th>State</th>
                    </tr>
                </thead>
                <tbody>
                    {% for appt in upcoming_appointments %}
                    <tr>
                        <td>{{ appt.appointment_time.strftime("%Y-%m-%d %H:%M") }}</td>
                        <td>{{ appt.patient.first_name }} {{ appt.patient.last_name }}</td>
                        <td>{{ appt.clinic_name }}</td>
                        <td>{{ appt.city }}</td>
                        <td>{{ appt.state }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p>No upcoming appointments.</p>
            {% endif %}
        </div>
    </div> -->

    <!-- Past Appointments -->
    <!-- <div class="dashboard-card">
        <div class="card-header-doctor">Past Appointments</div>
        <div class="card-content">
            {% if past_appointments %}
            <table border="1" cellpadding="5" cellspacing="0">
                <thead>
                    <tr>
                        <th>Date & Time</th>
                        <th>Patient Name</th>
                        <th>Clinic</th>
                        <th>City</th>
                        <th>State</th>
                    </tr>
                </thead>
                <tbody>
                    {% for appt in past_appointments %}
                    <tr>
                        <td>{{ appt.appointment_time.strftime("%Y-%m-%d %H:%M") }}</td>
                        <td>{{ appt.patient.first_name }} {{ appt.patient.last_name }}</td>
                        <td>{{ appt.clinic_name }}</td>
                        <td>{{ appt.city }}</td>
                        <td>{{ appt.state }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p>No past appointments.</p>
            {% endif %}
        </div>
    </div> -->

<!-- TODAY‚ÄôS APPOINTMENTS -->
<div class="card-header-doctor">Today's Appointments</div>
<div class="appointments-grid">
    {% if todays_appointments %}
        {% for appt in todays_appointments %}
        <div class="flip-card">
            <div class="flip-card-inner">
                
                <!-- FRONT: Appointment Info -->
                <div class="flip-card-front">
                    <h3>{{ appt.patient.first_name }} {{ appt.patient.last_name }}</h3>
                    <p><strong>Date:</strong> {{ appt.appointment_time.strftime("%B %d, %Y") }}</p>
                    <p><strong>Time:</strong> {{ appt.appointment_time.strftime("%I:%M %p") }}</p><br>
                    <button class="btn-primary-doctor toggle-btn">Hover for Patient Details</button>
                </div>

                <!-- BACK: Patient Info -->
                <div class="flip-card-back">
                    <h3 class="back-card-title">{{ appt.patient.first_name }} {{ appt.patient.last_name }}</h3>
                    <p><strong>DOB:</strong> {{ appt.patient.dob.strftime("%Y-%m-%d") }}</p>
                    <p><strong>Age:</strong> {{ appt.patient.age }}</p>
                    <p><strong>Phone:</strong> {{ appt.patient.phone_number or "phone number missing" }}</p>
                    <p><strong>Email:</strong> {{ appt.patient.email or "email missing" }}</p>
                    <p><strong>Address:</strong> {{ appt.patient.address or "address missing" }}</p>
                </div>

            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>No appointments today.</p>
    {% endif %}
</div>

<!-- UPCOMING APPOINTMENTS -->
<div class="card-header-doctor">Upcoming Appointments</div>
<div class="appointments-grid">
    {% if upcoming_appointments %}
        {% for appt in upcoming_appointments %}
        <div class="flip-card">
            <div class="flip-card-inner">
                
                <!-- FRONT: Appointment Info -->
                <div class="flip-card-front">
                    <h3>{{ appt.patient.first_name }} {{ appt.patient.last_name }}</h3>
                    <p><strong>Date:</strong> {{ appt.appointment_time.strftime("%B %d, %Y") }}</p>
                    <p><strong>Time:</strong> {{ appt.appointment_time.strftime("%I:%M %p") }}</p><br>
                    <button class="btn-primary-doctor toggle-btn">Hover for Patient Details</button>
                </div>

                <!-- BACK: Patient Info -->
                <div class="flip-card-back">
                    <h3 class="back-card-title">{{ appt.patient.first_name }} {{ appt.patient.last_name }}</h3>
                    <p><strong>DOB:</strong> {{ appt.patient.dob.strftime("%Y-%m-%d") }}</p>
                    <p><strong>Age:</strong> {{ appt.patient.age }}</p>
                    <p><strong>Phone:</strong> {{ appt.patient.phone_number or "phone number missing" }}</p>
                    <p><strong>Email:</strong> {{ appt.patient.email or "email missing" }}</p>
                    <p><strong>Address:</strong> {{ appt.patient.address or "address missing" }}</p>
                    <!-- <button class="btn-secondary toggle-btn">View Appointment Info</button> -->
                </div>

            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>No upcoming appointments.</p>
    {% endif %}
</div>




<!-- PAST APPOINTMENTS -->
<div class="card-header-doctor">Past Appointments</div>
<div class="appointments-grid">
    {% if past_appointments %}
        {% for appt in past_appointments %}
        <div class="flip-card">
            <div class="flip-card-inner">

                <!-- FRONT: Appointment Info -->
                <div class="flip-card-front">
                    <h3>{{ appt.patient.first_name }} {{ appt.patient.last_name }}</h3>
                    <p><strong>Date:</strong> {{ appt.appointment_time.strftime("%B %d, %Y") }}</p>
                    <p><strong>Time:</strong> {{ appt.appointment_time.strftime("%I:%M %p") }}</p><br>
                    <button class="btn-primary-doctor toggle-btn">Hover for Patient Details</button>
                </div>

                <!-- BACK: Patient Info -->
                <div class="flip-card-back">
                    <h3>{{ appt.patient.first_name }} {{ appt.patient.last_name }}</h3>
                    <p><strong>DOB:</strong> {{ appt.patient.dob.strftime("%Y-%m-%d") }}</p>
                    <p><strong>Age:</strong> {{ appt.patient.age }}</p>
                    <p><strong>Phone:</strong> {{ appt.patient.phone_number or "phone number missing" }}</p>
                    <p><strong>Email:</strong> {{ appt.patient.email or "email missing" }}</p>
                    <p><strong>Address:</strong> {{ appt.patient.address or "address missing" }}</p>
                </div>

            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>No past appointments.</p>
    {% endif %}
</div>

    </div>
</div>





<!-- 
                    <div class="quick-actions">
                    <div class="action-card">
                        <div class="action-icon">üìÖ</div>
                        <div>Schedule Appointment</div>
                    </div>
                    <div class="action-card">
                        <div class="action-icon">üîÑ</div>
                        <div>Reschedule</div>
                    </div>
                    <div class="action-card">
                        <div class="action-icon">‚ùå</div>
                        <div>Cancel Appointment</div>
                    </div>
                    <div class="action-card">
                        <div class="action-icon">üí¨</div>
                        <div>Contact Office</div>
                    </div> -->

                </div>
            </div>
        </div>
    </div>
    
    <div class="footer-doctor-page">
        <div>¬© Powered by Coin Flippers</div>
    </div>
    </body>
</html>